<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ğŸ¯ ä»Šæ—¥æ¸¸ç©æ¨è</title>

<style>
body {
    font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", Arial;
    background: #f7f7f7;
    margin: 0;
    padding: 16px;
    color: #222;
}
h1 { font-size: 26px; margin-bottom: 6px; }
.subtitle { color:#666; margin-bottom:16px; }

label {
    display:block;
    margin-top:8px;
    color:#555;
}
input {
    width:100%;
    padding:12px;
    font-size:18px;
    border-radius:10px;
    border:1px solid #ccc;
}

button {
    width:100%;
    margin-top:10px;
    padding:14px;
    font-size:18px;
    border:none;
    border-radius:12px;
    background:#007aff;
    color:#fff;
}
button.secondary {
    background:#e5e5ea;
    color:#000;
}
button.danger {
    background:#ff3b30;
}

.card {
    background:#fff;
    border-radius:14px;
    padding:16px;
    margin-top:14px;
    box-shadow:0 2px 8px rgba(0,0,0,0.05);
}
.item { font-size:18px; margin:6px 0; }
.small { font-size:14px; color:#666; }
</style>
</head>

<body>

<h1>ğŸ¯ ä»Šæ—¥æ¸¸ç©æ¨è</h1>
<div class="subtitle">ä¸çº ç»“ Â· è·ç¦»å‹å¥½ Â· ç›´æ¥é€‰</div>

<label>ğŸ‘¤ å¤§å</label>
<input id="name" placeholder="è¯·è¾“å…¥åå­—" />

<label>ğŸ“… æ—¥æœŸ</label>
<input id="date" type="date" />

<button onclick="generate()">ğŸ² æ¨èæ¸¸ç©</button>

<div id="options"></div>
<div id="final"></div>
<div id="historyBox"></div>

<button class="secondary" onclick="showHistory()">ğŸ“œ æŸ¥çœ‹å†å²</button>
<button class="danger" onclick="clearHistory()">ğŸ§¹ æ¸…é™¤å†å²</button>

<script>
// ===== ç¤ºä¾‹æ¸¸ç©æ•°æ®ï¼ˆå¯æ›¿æ¢ä¸ºä½ çš„å®Œæ•´æ•°æ®ï¼‰=====
const places = [
    "å’–å•¡åº— â˜•", "æµ·æ»© ğŸŒŠ", "å¤è‘£åº— ğŸª‘",
    "å®¶å…·åº— ğŸ›‹ï¸", "ç”œå“åº— ğŸ°", "å¥¶èŒ¶åº— ğŸ§‹"
];

function rand(arr){
    return arr[Math.floor(Math.random() * arr.length)];
}

function makePlay(){
    return [rand(places), rand(places), rand(places)];
}

function generate(){
    const name = document.getElementById("name").value.trim();
    const date = document.getElementById("date").value;
    if(!name){ alert("è¯·å…ˆè¾“å…¥å¤§å"); return; }

    document.getElementById("options").innerHTML = "â³ æ­£åœ¨ç”Ÿæˆæ¸¸ç©æ–¹æ¡ˆ...";
    document.getElementById("final").innerHTML = "";
    document.getElementById("historyBox").innerHTML = "";

    setTimeout(() => {
        const box = document.getElementById("options");
        box.innerHTML = "";
        for(let i=0;i<3;i++){
            const plan = makePlay();
            const card = document.createElement("div");
            card.className = "card";
            card.innerHTML = `
                <h3>æ–¹æ¡ˆ ${i+1}</h3>
                <div class="item">ğŸ“ ${plan[0]}</div>
                <div class="item">ğŸ“ ${plan[1]}</div>
                <div class="item">ğŸ“ ${plan[2]}</div>
                <button onclick='choose(${JSON.stringify(plan)}, "${name}", "${date}")'>
                    é€‰æ‹©è¿™ä¸ª
                </button>
            `;
            box.appendChild(card);
        }
    }, 3000);
}

function choose(plan, name, date){
    const history = JSON.parse(localStorage.getItem("playHistory") || "[]");
    history.push({ name, date, plan });
    localStorage.setItem("playHistory", JSON.stringify(history));

    document.getElementById("options").innerHTML = "";
    document.getElementById("final").innerHTML = `
        <div class="card">
            <h2>âœ… ä»Šæ—¥æ¸¸ç©</h2>
            <div class="item">ğŸ“ ${plan[0]}</div>
            <div class="item">ğŸ“ ${plan[1]}</div>
            <div class="item">ğŸ“ ${plan[2]}</div>
        </div>
    `;
}

function showHistory(){
    const box = document.getElementById("historyBox");
    const history = JSON.parse(localStorage.getItem("playHistory") || "[]");
    box.innerHTML = "";

    if(!history.length){
        box.innerHTML = "<div class='card'>æš‚æ— å†å²è®°å½•</div>";
        return;
    }

    history.forEach(h => {
        box.innerHTML += `
            <div class="card">
                <div class="item"><strong>${h.date}</strong> Â· ${h.name}</div>
                <div class="item">ğŸ“ ${h.plan[0]}</div>
                <div class="item">ğŸ“ ${h.plan[1]}</div>
                <div class="item">ğŸ“ ${h.plan[2]}</div>
            </div>
        `;
    });
}

function clearHistory(){
    if(confirm("ç¡®å®šæ¸…é™¤æ‰€æœ‰æ¸¸ç©å†å²å—ï¼Ÿ")){
        localStorage.removeItem("playHistory");
        document.getElementById("historyBox").innerHTML = "";
        alert("å†å²å·²æ¸…é™¤");
    }
}

// é»˜è®¤ä»Šå¤©
document.getElementById("date").value =
    new Date().toISOString().slice(0,10);
</script>

</body>
</html>
